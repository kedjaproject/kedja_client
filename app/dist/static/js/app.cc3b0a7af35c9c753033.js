webpackJsonp([1],{"/ndW":function(e,t){},"0ziG":function(e,t){},FUjd:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("lHA8"),a=n.n(r),s=n("Gu7T"),o=n.n(s),c=n("2aIq"),l=n.n(c),d=n("NYxO"),m=n("VU/8")({Wall:function(e){return{name:"Ny vägg",collections:[]}},Collection:function(e){return{name:"Ny samling",cards:[]}},Card:function(e){return{name:"Nytt kort",id:"",states:{}}}},null,!1,null,null,null).exports,u=n("lhjn");i.a.use(d.a);var h=new d.a.Store({state:{walls:[],activeWallId:0,connections:[]},mutations:{init:function(e,t){l()(t),e.walls=u.walls,h.commit("prepareData",{})},prepareData:function(e,t){l()(t),e.walls.forEach(function(e,t){e.collections.forEach(function(e,t){e.cards.forEach(function(e,t){i.a.set(e,"states",{})})})})},setCardsState:function(e,t){var n=t.cardIds,i=t.stateName;h.getters.getActiveWall().collections.forEach(function(e,t){e.cards.forEach(function(e,t){var r=-1!=n.indexOf(e.id);h.commit("setCardState",{card:e,stateName:i,stateFlag:r})})})},resetCardsState:function(e,t){t.cardIds;var n=t.stateName;h.getters.getActiveWall().collections.forEach(function(e,t){e.cards.forEach(function(e,t){h.commit("setCardState",{card:e,stateName:n,stateFlag:void 0})})})},setCardState:function(e,t){var n=t.card,r=t.stateName,a=t.stateFlag;i.a.set(n.states,r,a)},createCollectionInWall:function(e,t){t.wall.collections.push(m.Collection())},createCardInCollection:function(e,t){t.collection.cards.push(m.Card())},removeCollectionFromWall:function(e,t){var n=t.wall,i=t.collection,r=n.collections.indexOf(i);-1!=r&&n.collections.splice(r,1)},removeCardFromCollection:function(e,t){var n=t.collection,i=t.card,r=n.cards.indexOf(i);-1!=r&&n.cards.splice(r,1)},setDeepConnectionsByCardId:function(e,t){var n=t.id;e.connections=h.getters.getDeepConnectionsByCardId(n)},resetConnections:function(e){e.connections=[]}},getters:{getActiveWall:function(e){return function(t){return e.walls[e.activeWallId]}},getCardById:function(e){return function(t){var n=void 0;return e.walls[e.activeWallId].collections.forEach(function(e,i){var r=e.cards.find(function(e){return e.id==t});r&&(n=r)}),n}},getDirectConnectionsByCardId:function(e){return function(e){return h.getters.getActiveWall().connections.filter(function(t){return-1!=t.members.indexOf(e)})}},getDeepConnectionsByCardId:function(e){return function(e){var t=h.getters.getActiveWall().connections,n=h.getters.getRecursiveConnectionsByCardId(t,e,!0);return n=n.concat(h.getters.getRecursiveConnectionsByCardId(t,e,!1)),n=[].concat(o()(new a.a(n)))}},getRecursiveConnectionsByCardId:function(e){return function(e,t,n){var i=e.filter(function(e){return e.members[+!n]==t}),r=[];return i.forEach(function(t,i){r=r.concat(h.getters.getRecursiveConnectionsByCardId(e,t.members[+n],n))}),i=i.concat(r)}}}}),f={name:"App",created:function(){h.commit("init",{})},mounted:function(){document.activeElement.blur()}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this._v("\n  Kedja\n  "),t("router-view")],1)},staticRenderFns:[]};var p=n("VU/8")(f,_,!1,function(e){n("0ziG")},null,null).exports,v=n("/ocq"),g={name:"WrapperComponent",render:function(e){return e(this.tag,this.$slots.default)},props:{tag:{type:String,required:!0}}},C={name:"EditableInput",components:{WrapperComponent:n("VU/8")(g,null,!1,null,null,null).exports},props:{value:String,tag:"",placeholder:{default:"Ange text"},type:{default:"input"}},data:function(){return{editing:!1,textTemp:String,width:"",height:""}},computed:{inputVisible:function(){return this.editing||""==this.value}},watch:{},methods:{openEdit:function(){this.calcWidth(),this.editing=!0,this.textTemp=this.value,this.$nextTick(function(e){this.$refs.input.focus(),this.$refs.input.select()})},finishEdit:function(e){this.editing&&e&&this.emitToParent(),this.editing=!1},calcWidth:function(){this.$nextTick(function(){var e=this.$el.getElementsByClassName("textSpan")[0];e&&(this.width=e.offsetWidth,this.height=e.offsetHeight)})},emitToParent:function(){var e=""!==this.textTemp.trim()?this.textTemp:this.placeholder;this.$emit("input",e)}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"EditableInput",class:{fullWidth:e.inputVisible}},[n("wrapper-component",{staticClass:"text",attrs:{tag:e.tag,id:"eiTemp"}},[e.inputVisible?e._e():n("div",{staticClass:"textContainer",on:{click:function(t){return e.openEdit()}}},[n("span",{staticClass:"textSpan"},[e._v("\n        "+e._s(e.value)+"\n      ")])]),e._v(" "),e.inputVisible?n("div",["input"==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.textTemp,expression:"textTemp"}],ref:"input",style:{height:e.height+"px"},attrs:{placeholder:e.placeholder},domProps:{value:e.textTemp},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.finishEdit(!1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.finishEdit(!0)}],blur:function(t){return e.finishEdit(!0)},input:function(t){t.target.composing||(e.textTemp=t.target.value)}}}):e._e(),e._v(" "),"textarea"==e.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textTemp,expression:"textTemp"}],ref:"input",style:{width:e.width+"px",height:e.height+"px"},attrs:{placeholder:e.placeholder},domProps:{value:e.textTemp},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.finishEdit(!1)},blur:function(t){return e.finishEdit(!0)},change:e.calcWidth,input:function(t){t.target.composing||(e.textTemp=t.target.value)}}}):e._e()]):e._e()])],1)},staticRenderFns:[]};var x=n("VU/8")(C,b,!1,function(e){n("nYpZ")},"data-v-e73e5188",null).exports,y={name:"Card",components:{EditableInput:x},data:function(){return{hovering:!1}},props:{card:""},computed:{selected:function(){return 1==this.card.states.selected},connections:function(){return h.getters.getDeepConnectionsByCardId(this.card.id)},connectedCardIds:function(){var e=this,t=[];return this.connections.forEach(function(n,i){n.members[0]!=e.card.id&&-1==t.indexOf(n.members[0])&&t.push(n.members[0]),n.members[1]!=e.card.id&&-1==t.indexOf(n.members[1])&&t.push(n.members[1])}),t}},methods:{setHovering:function(e){this.hovering=e,e?(h.commit("setCardsState",{cardIds:this.connectedCardIds,stateName:"connected"}),h.commit("setDeepConnectionsByCardId",{id:this.card.id})):(h.commit("resetCardsState",{stateName:"connected"}),h.commit("resetConnections"))},setSelected:function(e){e.srcElement==this.$el&&(this.selected?(h.commit("resetCardsState",{stateName:"selected"}),h.commit("resetCardsState",{stateName:"selectedConnected"})):(h.commit("setCardsState",{cardIds:[this.card.id],stateName:"selected"}),h.commit("setCardsState",{cardIds:this.connectedCardIds,stateName:"selectedConnected"})))},removeCard:function(){this.$emit("removeCard",this.card)}},mounted:function(){}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Card",class:{selected:e.card.states.selected,selectedConnectedOther:0==e.card.states.selectedConnected,connected:e.card.states.connected,connectedOther:0==e.card.states.connected},on:{mouseenter:function(t){return e.setHovering(!0)},mouseleave:function(t){return e.setHovering(!1)},click:function(t){return e.setSelected(t)}}},[n("EditableInput",{ref:"input-name",staticClass:"cardName",attrs:{tag:"span"},on:{click:function(t){return e.focusAndSelect()}},model:{value:e.card.name,callback:function(t){e.$set(e.card,"name",t)},expression:"card.name"}}),e._v(" "),e.hovering?n("button",{staticClass:"remove",on:{click:e.removeCard}},[e._v("\n    Ta bort kort\n  ")]):e._e()],1)},staticRenderFns:[]};var w={name:"Collection",components:{Card:n("VU/8")(y,E,!1,function(e){n("/ndW")},"data-v-38661677",null).exports,EditableInput:x},data:function(){return{hovering:!1}},computed:{cardsFiltered:function(){return this.collection.cards.filter(function(e){return 0!=e.states.selected||0!=e.states.selectedConnected})}},props:{collection:""},methods:{setHovering:function(e){this.hovering=e},removeCollection:function(){this.$emit("removeCollection",this.collection)},createCard:function(){h.commit("createCardInCollection",{collection:this.collection})},removeCard:function(e){h.commit("removeCardFromCollection",{collection:this.collection,card:e})}},mounted:function(){}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Collection",on:{mouseenter:function(t){return e.setHovering(!0)},mouseleave:function(t){return e.setHovering(!1)}}},[n("EditableInput",{attrs:{tag:"h2"},model:{value:e.collection.name,callback:function(t){e.$set(e.collection,"name",t)},expression:"collection.name"}}),e._v(" "),n("transition-group",{staticClass:"cards",attrs:{name:"fade",mode:"out-in"}},e._l(e.cardsFiltered,function(t){return n("card",{key:t.id,attrs:{card:t,id:t.id},on:{removeCard:e.removeCard}})}),1),e._v(" "),n("button",{staticClass:"fullWidth",attrs:{title:"Lägg till nytt kort"},on:{click:e.createCard}},[e._v("Lägg till nytt kort")]),e._v(" "),e.hovering?n("button",{staticClass:"remove",attrs:{title:"Ta bort samling"},on:{click:e.removeCollection}},[e._v("\n    x\n  ")]):e._e()],1)},staticRenderFns:[]};var I={name:"Connection",data:function(){return{x0:"",y0:"",x1:"",y1:""}},props:{from:"",to:""},computed:{width:function(){return Math.abs(this.x1-this.x0)},height:function(){return Math.abs(this.y1-this.y0)},left:function(){return Math.min(this.x0,this.x1)},top:function(){return Math.min(this.y0,this.y1)}},watch:{},methods:{setBounds:function(){var e=document.getElementById(this.from),t=document.getElementById(this.to);this.x0=e.getBoundingClientRect().x+e.getBoundingClientRect().width,this.y0=e.getBoundingClientRect().y+e.getBoundingClientRect().height/2,this.x1=t.getBoundingClientRect().x,this.y1=t.getBoundingClientRect().y+t.getBoundingClientRect().height/2,this.drawCanvas()},drawCanvas:function(){var e=this.$el.getElementsByTagName("canvas")[0].getContext("2d");e.lineWidth=1,e.strokeStyle="#666666",e.beginPath();var t=this.y0>this.y1?this.height+5:5,n=this.y0>this.y1?5:this.height+5;e.moveTo(0,t),e.bezierCurveTo(this.width/2,t,this.width/2,n,this.width,n),e.stroke(),e.beginPath(),e.arc(0,t,5,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(this.width,n,5,0,2*Math.PI),e.fill()}},mounted:function(){this.setBounds()},updated:function(){this.setBounds()}},W={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Connection",style:{top:this.top-5+"px",left:this.left+"px"}},[t("canvas",{staticClass:"canvasConnection",attrs:{width:this.width,height:this.height+10}})])},staticRenderFns:[]};var B={name:"Wall",components:{Collection:n("VU/8")(w,k,!1,function(e){n("pzE4")},"data-v-f30d7e0c",null).exports,Connection:n("VU/8")(I,W,!1,function(e){n("SbwO")},"data-v-39591e1e",null).exports,EditableInput:x},data:function(){return{}},props:{wall:""},computed:{connections:function(){return h.state.connections}},methods:{createCollection:function(){h.commit("createCollectionInWall",{wall:this.wall})},removeCollection:function(e){h.commit("removeCollectionFromWall",{wall:this.wall,collection:e})}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Wall"},[n("EditableInput",{attrs:{tag:"h1"},model:{value:e.wall.name,callback:function(t){e.$set(e.wall,"name",t)},expression:"wall.name"}}),e._v(" "),n("div",{attrs:{id:"collections"}},[e._l(e.wall.collections,function(t){return n("collection",{staticClass:"collection",attrs:{collection:t},on:{removeCollection:e.removeCollection}})}),e._v(" "),n("button",{attrs:{title:"Lägg till ny samling"},on:{click:e.createCollection}},[e._v("+")])],2),e._v(" "),e._l(e.connections,function(e){return n("connection",{attrs:{from:e.members[0],to:e.members[1]}})})],2)},staticRenderFns:[]};var N={name:"Landing",components:{Wall:n("VU/8")(B,S,!1,function(e){n("Y+Ns")},"data-v-d2afb1be",null).exports},data:function(){return{}},props:{},computed:{walls:function(){return h.state.walls},activeWallId:function(){return h.state.activeWallId}},methods:{},mounted:function(){}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Landing"},[t("wall",{attrs:{wall:this.walls[this.activeWallId]}})],1)},staticRenderFns:[]};var $=n("VU/8")(N,T,!1,function(e){n("FUjd")},"data-v-255ed6e4",null).exports;i.a.use(v.a);var R=new v.a({mode:"history",routes:[{path:"/",name:"Landing",component:$}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:R,components:{App:p},template:"<App/>"})},SbwO:function(e,t){},"Y+Ns":function(e,t){},lhjn:function(e,t){e.exports={walls:[{name:"Min vägg",collections:[{name:"Resurser",cards:[{name:"BFL-grupp Kreativ Lärmiljö",id:"0_0"},{name:"Ekonomiska resurser",id:"0_1"},{name:"Avsnitt tid",id:"0_2"},{name:"Elever",id:"0_3"},{name:"Pedagoger",id:"0_4"},{name:"Skolledning",id:"0_5"},{name:"Skolhus",id:"0_6"},{name:"Vaktmästare/lokalansvarig",id:"0_7"}]},{name:"Aktiviteter",cards:[{name:"Samarbete",id:"1_0"},{name:"Inspiration",id:"1_1"},{name:"Elevgrupp",id:"1_2"},{name:"Utformning av klassrumsmiljöer",id:"1_3"},{name:"Utformning av öppna miljöer",id:"1_4"}]},{name:"Resultat",cards:[{name:"Personal",id:"2_0"},{name:"Elever",id:"2_1"},{name:"Pedagogik",id:"2_2"},{name:"Organisation",id:"2_3"}]},{name:"Effekter",cards:[{name:"Kreativ medvetenhet",id:"3_0"},{name:"Kreativa miljöer",id:"3_1"},{name:"Kreativ pedagogik",id:"3_2"}]}],connections:[{id:"0",members:["0_0","1_0"]},{id:"0",members:["0_0","1_2"]},{id:"0",members:["0_0","1_3"]},{id:"0",members:["0_1","1_1"]},{id:"0",members:["0_1","1_2"]},{id:"0",members:["0_1","1_3"]},{id:"0",members:["0_1","1_4"]},{id:"0",members:["0_2","1_0"]},{id:"0",members:["0_2","1_1"]},{id:"0",members:["0_2","1_2"]},{id:"0",members:["0_2","1_3"]},{id:"0",members:["0_3","1_2"]},{id:"0",members:["0_3","1_3"]},{id:"0",members:["0_3","1_4"]},{id:"0",members:["0_4","1_0"]},{id:"0",members:["0_4","1_1"]},{id:"0",members:["0_4","1_2"]},{id:"0",members:["0_4","1_3"]},{id:"0",members:["0_4","1_4"]},{id:"0",members:["0_5","1_0"]},{id:"0",members:["0_5","1_1"]},{id:"0",members:["0_5","1_2"]},{id:"0",members:["0_5","1_3"]},{id:"0",members:["0_5","1_4"]},{id:"0",members:["0_6","1_3"]},{id:"0",members:["0_6","1_4"]},{id:"0",members:["0_7","1_3"]},{id:"0",members:["0_7","1_4"]},{id:"0",members:["1_0","2_0"]},{id:"0",members:["1_0","2_1"]},{id:"0",members:["1_0","2_2"]},{id:"0",members:["1_1","2_0"]},{id:"0",members:["1_1","2_2"]},{id:"0",members:["1_2","2_1"]},{id:"0",members:["1_2","2_2"]},{id:"0",members:["1_3","2_0"]},{id:"0",members:["1_3","2_1"]},{id:"0",members:["1_3","2_2"]},{id:"0",members:["1_3","2_3"]},{id:"0",members:["1_4","2_0"]},{id:"0",members:["1_4","2_1"]},{id:"0",members:["1_4","2_2"]},{id:"0",members:["1_4","2_3"]},{id:"0",members:["2_0","3_0"]},{id:"0",members:["2_0","3_1"]},{id:"0",members:["2_0","3_2"]},{id:"0",members:["2_1","3_0"]},{id:"0",members:["2_1","3_1"]},{id:"0",members:["2_1","3_2"]},{id:"0",members:["2_2","3_0"]},{id:"0",members:["2_2","3_1"]},{id:"0",members:["2_2","3_2"]},{id:"0",members:["2_3","3_0"]},{id:"0",members:["2_3","3_1"]},{id:"0",members:["2_3","3_2"]}]}]}},nYpZ:function(e,t){},pzE4:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cc3b0a7af35c9c753033.js.map